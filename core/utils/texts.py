import re

from funcy import str_join


def phone(client_phone):
    client_phone = str_join(sep="", seq=re.findall(r'[0-9]*', client_phone))
    if re.findall(r'^89', client_phone):
        return re.sub(r'^89', '79', client_phone)
    return client_phone


def ostatki_date(date):
    return f'–û—Å—Ç–∞—Ç–∫–∏ <b><u>{date}</u></b>\n–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª–µ–µ —Å–≤–µ–∂–∏–µ –æ—Å—Ç–∞—Ç–∫–∏, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –Ω–∞–º –≤ —Ç–µ—Ö.–ø–æ–¥–¥–µ—Ä–∂–∫—É'


def accept_text(boxs):
    text = '‚ûñ‚ûñ‚ûñ<b><u>–ö–æ—Ä–æ–±–∫–∏ –¥–ª—è –ø—Ä–∏—ë–º–∞</u></b>‚ûñ‚ûñ‚ûñ\n'
    text += '–ù–∞–∑–≤–∞–Ω–∏–µ | –û–±—å–µ–º | –ö–æ–ª-–≤–æ –±—É—Ç—ã–ª–æ–∫\n'
    text += '‚ûñ' * 15 + '\n'
    count = 0
    for box in boxs:
        if not box.scaned:
            text += f'{box.name} | {box.capacity[:4]}–ª | {box.count_bottles}—à—Ç\n'
        else:
            text += f'<s>{box.name} | {box.capacity[:4]}–ª | {box.count_bottles}—à—Ç</s>‚úÖ\n'
            count += 1
    text += '‚ûñ' * 15 + '\n'
    text += f'–ü—Ä–∏–Ω—è—Ç–æ <b><u>{count}</u></b> –∏–∑ <b><u>{len(boxs)}</u></b> –∫–æ—Ä–æ–±–æ–∫'
    return text


def divirgence_text(boxs):
    text = '<b><u>–ù–∏–∂–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∫–æ—Ä–æ–±–∫–∏ –Ω–µ –±—É–¥—É—Ç –ø–æ—Ç–¥–≤–µ—Ä–∂–¥–µ–Ω—ã</u></b>\n'
    text += '–ù–∞–∑–≤–∞–Ω–∏–µ | –û–±—å–µ–º | –ö–æ–ª-–≤–æ –±—É—Ç—ã–ª–æ–∫ | –ù–æ–º–µ—Ä –∫–æ—Ä–æ–±–∫–∏\n'
    text += '‚ûñ' * 15 + '\n'
    for box in boxs:
        if not box.scaned:
            text += f'{box.name} | {box.capacity[:4]}–ª | {box.count_bottles}—à—Ç | {box.boxnumber}\n'
    text += '‚ûñ' * 15 + '\n'
    return text


def beer_accept_text(bottles):
    text = '‚ûñ‚ûñ‚ûñ<b><u>–ë—É—Ç—ã–ª–∫–∏ –¥–ª—è –ø—Ä–∏—ë–º–∞</u></b>‚ûñ‚ûñ‚ûñ\n'
    text += '–ù–∞–∑–≤–∞–Ω–∏–µ | –ö–æ–ª-–≤–æ –±—É—Ç—ã–ª–æ–∫\n'
    text += '‚ûñ' * 15 + '\n'
    for bottle in bottles:
        text += f'{bottle.name} | {bottle.quantity}—à—Ç\n'
    return text


def scanning_inventory(bottles):
    text = '‚ûñ‚ûñ‚ûñ<b><u>–ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è</u></b>‚ûñ‚ûñ‚ûñ\n'
    text += f'–û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –±—É—Ç—ã–ª–æ–∫: <b><u>{len(bottles)}</u></b>\n'
    return text


def detailed_inventory(detailed_bottles):
    text = '‚ûñ‚ûñ‚ûñ<b><u>–ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è</u></b>‚ûñ‚ûñ‚ûñ\n'
    text += '–ù–∞–∑–≤–∞–Ω–∏–µ | –ö–æ–ª-–≤–æ –±—É—Ç—ã–ª–æ–∫\n'
    text += '‚ûñ' * 15 + '\n'
    total = 0
    for bottle in detailed_bottles:
        text += f'{bottle.name} | <b><u>{bottle.count} —à—Ç</u></b>\n'
        text += '‚ûñ' * 10 + '\n'
        total += bottle.count
    text += f'–í—Å–µ–≥–æ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ: <b><u>{total} —à—Ç</u></b>\n'
    print(len(text))
    return text


error_head = f"‚ûñ‚ûñ‚ûñ‚ûñ‚ûñüö®–û–®–ò–ë–ö–êüö®‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n"
error_cashNumber = error_head + f'–ù—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã. –ù–∞–ø—Ä–∏–º–µ—Ä: <b><u>902</u></b>\n<b>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞</b>'
error_fake_client_phone = error_head + f'–í—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —á—É–∂–æ–π —Å–æ—Ç–æ–≤—ã–π'
error_duplicateCash = error_head + '–° –¥–∞–Ω–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ –±–æ–ª—å—à–µ –æ–¥–Ω–æ–π –∫–∞—Å—Å—ã\n–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Ç–µ—Ö –ø–æ–¥–¥—Ä–µ–∂–∫—É.'
error_cash_not_found = error_head + '–î–∞–Ω–Ω–∞—è –∫–∞—Å—Å–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞\n–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Ç–µ—Ö –ø–æ–¥–¥—Ä–µ–∂–∫—É.'
error_price_not_decimal = "{error_head}–¶–µ–Ω–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ –Ω—É–∂–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞\n–ü—Ä–∏–º–µ—Ä –∫–∞–∫ –Ω–∞–¥–æ: <u><b>10.12</b></u>".format(error_head=error_head)
menu = (f'<u><b>–û—Å—Ç–∞—Ç–∫–∏</b></u> - –ü–æ–ª—É—á–∏—Ç—å –æ—Å—Ç–∞—Ç–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞\n'
        f'<u><b>–ù–∞–∫–ª–∞–¥–Ω—ã–µ</b></u> - –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏\n'
        f'<u><b>–¢–æ–≤–∞—Ä—ã</b></u> - –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç–æ–≤–∞—Ä–∞–º–∏')
#         f'<u><b>–¢–æ–≤–∞—Ä—ã</b></u> - –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç–æ–≤–∞—Ä–∞–º–∏\n'
#         f'<u><b>–ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è</b></u> - –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤')
need_registration = ('–ù—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ –±–æ—Ç–µ.\n'
                     f'–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É <u><b>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</b></u>\n')
succes_registration = '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω–∞'
WayBills = (f'<u><b>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –Ω–∞–∫–ª–∞–¥–Ω—ã–µ</b></u> - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –Ω–µ –ø—Ä–∏–Ω—è—Ç—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ.\n'
            f'<u><b>–°–ø–∏—Å–æ–∫</b></u> - –í—ã–≤–µ–¥–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–µ—Å—è—Ç–∏ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö.')
WayBills_blacklist = f'<u><b>–°–ø–∏—Å–æ–∫</b></u> - –í—ã–≤–µ–¥–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–µ—Å—è—Ç–∏ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö.'
goods = (f'<u><b>–°–æ–∑–¥–∞—Ç—å —à—Ç—Ä–∏—Ö–∫–æ–¥</b></u> - —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —à—Ç—Ä–∏—Ö-–∫–æ–¥.\n'
         f'<u><b>–ò–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—É</b></u> - –∏–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—É —Ç–æ–≤–∞—Ä–∞ –Ω–∞ –∫–∞—Å—Å–µ.')
ostatki = (f'<u><b>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∏</b></u> - –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—Ç–∫–∏\n'
           f'<u><b>–°–ø–∏—Å–æ–∫ –ø–æ –¥–∞—Ç–∞–º</b></u> - –í—ã–≤–µ–¥–µ–º –¥–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 6 —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤')
enter_cash_number = '–ù–∞–ø–∏—à–∏—Ç–µ –Ω–æ–º–µ—Ä –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:\n–ù—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã. –ù–∞–ø—Ä–∏–º–µ—Ä: <b><u>902</u></b>'
list_ostatki = '–í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é –¥–∞—Ç—É –æ—Å—Ç–∞—Ç–∫–æ–≤'
choose_entity = '–í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω–æ–µ —é—Ä.–ª–∏—Ü–æ'

inventory = '–ú–æ–∂–µ—Ç–µ –Ω–∞—á–∏–Ω–∞—Ç—å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è.\n'
